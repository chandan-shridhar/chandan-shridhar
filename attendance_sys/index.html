<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leave Marking App</title>
</head>
<body>
  <h1>Leave Marking App</h1>
  <form id="attendanceForm">
    <label for="empName">Member Name:</label>
    <input type="text" id="empName" name="empName" required>
    <label for="moduleName">Module Name:</label>
    <select id="moduleName" name="moduleName" required>
		<option value="perf">PERF</option>
		<option value="pps">PPS</option>
		<option value="uqa">UQA</option>
		<option value="cts">CTS</option>
		<option value="tap">TAP</option>
		<option value="cadmin">CADMIN</option>
		<option value="sfdc">SFDC</option>
	</select>	
	<br>
	<br>
	<button type="submit">Mark Leave</button>
  </form>

<script>
	document.getElementById('empName').value = ''; // Clear the input field
	document.getElementById('moduleName').value = ''; // Clear the input field
	  
  document.getElementById('attendanceForm').addEventListener('submit', function (event) {
    event.preventDefault();
    const empName = document.getElementById('empName').value;
	const moduleName = document.getElementById('moduleName').value;

    console.log('Submitting Leave for:', empName, 'from module:', moduleName);

    fetch('http://127.0.0.1:3000/mark-leave', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ empName, moduleName }),
    })
    .then(response => {
      console.log('Received response from server:', response);
      return response.text();
    })
    .then(message => {
      console.log('Server message:', message);
      alert(message);
      // You can do additional UI updates here
	  
	  document.getElementById('empName').value = ''; // Clear the input field
	  document.getElementById('moduleName').value = ''; // Clear the input field
	  
    })
    .catch(error => console.error('Error:', error));
  });
</script>

</body>
</html>
